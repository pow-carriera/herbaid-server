"use strict";(self.webpackChunkherbaid_server=self.webpackChunkherbaid_server||[]).push([[695],{85078:(w,b,e)=>{e.r(b),e.d(b,{SettingsPage:()=>M,default:()=>V});var t=e(67294),T=e(15482),z=e(97132),g=e(68547),B=e(85018),P=e(35961),L=e(46273),u=e(20707),I=e(72735),A=e(29728),N=e(185),D=e(7681),k=e(11276),f=e(74571),x=e(67838),R=e(49066),U=e(17034),G=e(78648),H=e(18446),F=e.n(H),n=e(57197);const Z=a=>a;var K=e(18172),W=e(36968),X=e.n(W);const j={isLoading:!0,isSubmiting:!1,initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}},J=(a,l)=>(0,K.default)(a,i=>{switch(l.type){case"CANCEL_CHANGES":{i.modifiedData=a.initialData;break}case"GET_DATA_SUCCEEDED":{i.isLoading=!1,i.initialData=l.data,i.modifiedData=l.data;break}case"ON_CHANGE":{X()(i,["modifiedData",...l.keys.split(".")],l.value);break}case"ON_SUBMIT":{i.isSubmiting=!0;break}case"SUBMIT_SUCCEEDED":{i.initialData=a.modifiedData,i.isSubmiting=!1;break}case"ON_SUBMIT_ERROR":{i.isSubmiting=!1;break}default:return a}});var Q=e(16838),y=e(25108),C=(a,l,i)=>new Promise((v,m)=>{var h=s=>{try{r(i.next(s))}catch(d){m(d)}},p=s=>{try{r(i.throw(s))}catch(d){m(d)}},r=s=>s.done?v(s.value):Promise.resolve(s.value).then(h,p);r((i=i.apply(a,l)).next())});const M=()=>{const{formatMessage:a}=(0,z.useIntl)(),{lockApp:l,unlockApp:i}=(0,g.useOverlayBlocker)(),v=(0,g.useNotification)();(0,g.useFocusWhenNavigate)();const[{initialData:m,isLoading:h,isSubmiting:p,modifiedData:r},s]=(0,t.useReducer)(J,j,Z),d=(0,t.useRef)(!0);(0,t.useEffect)(()=>{const c=G.Z.CancelToken.source(),$=()=>C(void 0,null,function*(){try{const{data:{data:O}}=yield n.be.get((0,n.IF)("settings"),{cancelToken:c.token});s({type:"GET_DATA_SUCCEEDED",data:O})}catch(O){y.error(O)}});return d.current&&$(),()=>{c.cancel("Operation canceled by the user."),d.current=!1}},[]);const S=F()(m,r),Y=o=>C(void 0,null,function*(){if(o.preventDefault(),!S){l(),s({type:"ON_SUBMIT"});try{yield n.be.put((0,n.IF)("settings"),r),s({type:"SUBMIT_SUCCEEDED"}),v({type:"success",message:{id:"notification.form.success.fields"}})}catch(c){y.error(c),s({type:"ON_SUBMIT_ERROR"})}i()}}),E=({target:{name:o,value:c}})=>{s({type:"ON_CHANGE",keys:o,value:c})};return t.createElement(N.o,{tabIndex:-1},t.createElement(T.Helmet,{title:a({id:(0,n.OB)("page.title"),defaultMessage:"Settings - Media Libray"})}),t.createElement("form",{onSubmit:Y},t.createElement(x.T,{title:a({id:(0,n.OB)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:t.createElement(A.z,{disabled:S,"data-testid":"save-button",loading:p,type:"submit",startIcon:t.createElement(B.Z,null),size:"S"},a({id:"global.save",defaultMessage:"Save"})),subtitle:a({id:(0,n.OB)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),t.createElement(R.D,null,h?t.createElement(g.LoadingIndicatorPage,null):t.createElement(U.A,null,t.createElement(D.K,{spacing:12},t.createElement(P.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(D.K,{spacing:4},t.createElement(L.k,null,t.createElement(I.Z,{variant:"delta",as:"h2"},a({id:(0,n.OB)("settings.blockTitle"),defaultMessage:"Asset management"}))),t.createElement(k.r,{gap:6},t.createElement(f.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"responsiveDimensions","data-testid":"responsiveDimensions",checked:r.responsiveDimensions,hint:a({id:(0,n.OB)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:a({id:(0,n.OB)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:o=>{E({target:{name:"responsiveDimensions",value:o.target.checked}})}})),t.createElement(f.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"sizeOptimization","data-testid":"sizeOptimization",checked:r.sizeOptimization,hint:a({id:(0,n.OB)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:a({id:(0,n.OB)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:o=>{E({target:{name:"sizeOptimization",value:o.target.checked}})}})),t.createElement(f.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"autoOrientation","data-testid":"autoOrientation",checked:r.autoOrientation,hint:a({id:(0,n.OB)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:a({id:(0,n.OB)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:o=>{E({target:{name:"autoOrientation",value:o.target.checked}})}}))))))))))},V=()=>t.createElement(g.CheckPagePermissions,{permissions:Q.Z.settings},t.createElement(M,null))}}]);
